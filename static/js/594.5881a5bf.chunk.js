!function(){"use strict";function r(r,n){(null==n||n>r.length)&&(n=r.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=r[t];return o}function n(n,t){if(n){if("string"===typeof n)return r(n,t);var o=Object.prototype.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(n,t):void 0}}function t(t){return function(n){if(Array.isArray(n))return r(n)}(t)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(r,t){var o="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!o){if(Array.isArray(r)||(o=n(r))||t&&r&&"number"===typeof r.length){o&&(r=o);var e=0,a=function(){};return{s:a,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,f=!1;return{s:function(){o=o.call(r)},n:function(){var r=o.next();return l=r.done,r},e:function(r){f=!0,i=r},f:function(){try{l||null==o.return||o.return()}finally{if(f)throw i}}}}function e(r){for(var n=0;n<6;n++)for(var t=13*(n+1)-1,o=12;o>=0;o--){var e=13*n+o;0!==r[e]&&(r[t]=r[e],t!==e&&(r[e]=0),t--)}}function a(r){for(var n=!1,t=Array(r.length).fill(!1),e=function(){if(r[a]<=0||r[a]>=6||a%13===0||t[a])return"continue";for(var e=r[a],i=new Set([a]),l=[a];l.length>0;){var f=l.shift();t[f]=!0;var u=function(n){n>=1&&n<r.length&&r[n]===e&&!i.has(n)&&!t[n]&&(i.add(n),l.push(n))};f%13!==1&&u(f-1),f%13!==12&&u(f+1),f<65&&u(f+13),f>13&&u(f-13)}var s,c=0,v=o(i);try{for(v.s();!(s=v.n()).done;){var h=s.value;r[h]===e&&c++}}catch(p){v.e(p)}finally{v.f()}c>=4&&(n=!0,i.forEach((function(n){r[n]=0,[n%13===1?null:n-1,n%13===12?null:n+1,n+13,n-13].forEach((function(n){null!==n&&n>=1&&n<r.length&&6===r[n]&&(r[n]=0)}))})))},a=1;a<r.length;a++)e();return n}function i(r){for(var n=Array(r.length).fill(!1),t=function(){if(r[e]<=0||r[e]>=6||e%13===0||n[e])return"continue";for(var t=r[e],a=new Set([e]),i=[e];i.length>0;){var l=i.shift();n[l]=!0;var f=function(o){o>=1&&o<r.length&&r[o]===t&&!a.has(o)&&!n[o]&&(a.add(o),i.push(o))};l%13!==1&&f(l-1),l%13!==12&&f(l+1),l<65&&f(l+13),l>13&&f(l-13)}var u,s=0,c=o(a);try{for(c.s();!(u=c.n()).done;){var v=u.value;r[v]===t&&s++}}catch(h){c.e(h)}finally{c.f()}return s>=4?{v:!0}:void 0},e=1;e<r.length;e++){var a=t();if("continue"!==a&&"object"===typeof a)return a.v}return!1}function l(r,n){for(var t=0;t<13;t++){var o=r[13*n+t];if(1<=o&&o<6)return void(r[13*n+t]=0)}console.log("popHighestColoredPuyoIndex erroe!")}self.addEventListener("message",(function(r){var n=r.data,o=n.plainField,f=n.nextPuyos,u=n.selectedChain,s=o,c=n.displayedSteps;console.log("in web worker: "),console.log(s);var v=function(r,n,o,f){e(r);var u=function r(n,f,u,s){if(u===s)return function(r){var n,t=0;do{e(r),(n=a(r))&&t++}while(n);return t}(t(n))===o?n:null;for(var c=f[u][0],v=f[u][1],h=0;h<6;h++){var p=13*h,y=[{pos1:p,pos2:p+1},{pos1:p+1,pos2:p}];0!==h&&y.push({pos1:p,pos2:p-13}),5!==h&&y.push({pos1:p,pos2:p+13});for(var d=0,g=y;d<g.length;d++){var b=g[d];if(0===n[b.pos1]&&0===n[b.pos2])if(n[b.pos1]=c,n[b.pos2]=v,e(n),u+1<s&&i(n))l(n,Math.floor(b.pos1/13)),l(n,Math.floor(b.pos2/13));else{var m=r(n,f,u+1,s);if(null!==m)return m;l(n,Math.floor(b.pos1/13)),l(n,Math.floor(b.pos2/13)),e(n)}}}return null};return u(r,n,0,f)}(s,f,u,c);v?(console.log("\u89e3\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\uff01"),self.postMessage(v)):(console.log("\u89e3\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"),self.postMessage(s))}))}();
//# sourceMappingURL=594.5881a5bf.chunk.js.map